{
  "Insert Generico": {
    "prefix": "insert_generico",
    "body": [
      "insert into #tabla (",
      "columna1,                columna2,             columna3,           --1",
      "columna4,                columna5,             columna6,           --2",
      "columna7,                columna8,             columna9,           --3",
      "columna10,               columna11,            columna12,          --4",
      "columna13,               columna14,            columna15,          --5",
      "columna16,               columna17,            columna18 )         --6",
      "values (",
      "null,                    null,                 null,               --1",
      "null,                    null,                 null,               --2",
      "null,                    null,                 null,               --3",
      "null,                    null,                 null,               --4",
      "null,                    null,                 null,               --5",
      "null,                    null,                 null )              --6",
      "",
      "if @@error <> 0",
      "begin",
      "   select",
      "   @o_d_msg    = 'ERROR AL INSERTAR EN LA TABLA #tabla',",
      "   @w_n_error  = 000000",
      "",
      "   goto ERROP_TRAP",
      "end"
    ],
    "description": "Insert generico con 18 columnas y control de error"
  },
  "Insert Transaccion Servicio 724": {
    "prefix": "insert_tran_servicio724",
    "body": [
      "if @i_m_aplicar_724 = 'S'",
      "begin",
      "   insert into cob_724..cc_tran_servicio724(",
      "   sv_columna1,               sv_columna2,         sv_columna3,        --1",
      "   sv_columna4,               sv_columna5,         sv_columna6,        --2",
      "   sv_columna7,               sv_columna8,         sv_columna9,        --3",
      "   sv_columna10,              sv_columna11,        sv_columna12,       --4",
      "   sv_columna13,              sv_columna14,        sv_columna15,       --5",
      "   sv_columna16,              sv_columna17,        sv_columna18,       --6",
      "   sv_columna19,              sv_columna20,        sv_columna21,       --7",
      "   sv_columna22,              sv_columna23,        sv_columna24,       --8",
      "   sv_columna25,              sv_columna26,        sv_columna27,       --9",
      "   sv_columna28,              sv_columna29,        sv_columna30 )      --10",
      "   values (",
      "   null,                      null,                null,               --1",
      "   null,                      null,                null,               --2",
      "   null,                      null,                null,               --3",
      "   null,                      null,                null,               --4",
      "   null,                      null,                null,               --5",
      "   null,                      null,                null,               --6",
      "   null,                      null,                null,               --7",
      "   null,                      null,                null,               --8",
      "   null,                      null,                null,               --9",
      "   null,                      null,                null )              --10",
      "",
      "   if @@error != 0",
      "   begin",
      "      /* ERROR EN CREACION DE TRANSACCION DE SERVICIO 724*/",
      "      select ",
      "      @o_d_msg = 'ERROR EN INSERCION DE TRANSACCION DE SERVICIO 724',",
      "      @w_n_error = 203005",
      "",
      "      goto ERROP_TRAP",
      "   end",
      "end",
      "else",
      "begin",
      "   insert into #tabla (",
      "   columna1,                columna2,             columna3,           --1",
      "   columna4,                columna5,             columna6,           --2",
      "   columna7,                columna8,             columna9,           --3",
      "   columna10,               columna11,            columna12,          --4",
      "   columna13,               columna14,            columna15,          --5",
      "   columna16,               columna17,            columna18 )         --6",
      "   values (",
      "   null,                    null,                 null,               --1",
      "   null,                    null,                 null,               --2",
      "   null,                    null,                 null,               --3",
      "   null,                    null,                 null,               --4",
      "   null,                    null,                 null,               --5",
      "   null,                    null,                 null )              --6",
      "",
      "   if @@error != 0",
      "   begin",
      "      /* ERROR EN CREACION DE TRANSACCION DE SERVICIO */",
      "      select",
      "      @o_d_msg    = 'ERROR EN INSERCION DE TRANSACCION DE SERVICIO',",
      "      @w_n_error  = 203005",
      "",
      "      goto ERROP_TRAP",
      "   end",
      "end"
    ],
    "description": "Insert para transaccion de servicio 724 con control de error"
  },
  "Update Generico": {
    "prefix": "update_generico",
    "body": [
      "update #tabla set",
      "columna1 = null,",
      "columna2 = null,",
      "columna3 = null,",
      "columna4 = null,",
      "columna5 = null,",
      "columna6 = null",
      "where columna1 = @i_columna1",
      "and   columna2 = @i_columna2",
      "and   columna3 = @i_columna3",
      "and   columna4 = @i_columna4",
      "and   columna5 = @i_columna5",
      "and   columna6 = @i_columna6",
      "",
      "if @@error <> 0",
      "begin",
      "   select",
      "   @o_d_msg    = 'ERROR EN ACTUALIZACION DE TABLA #tabla',",
      "   @w_n_error  = 000000",
      "",
      "   goto ERROP_TRAP",
      "end"
    ],
    "description": "Update generico con 6 columnas y control de error"
  },
  "Delete Generico": {
    "prefix": "delete_generico",
    "body": [
      "delete from #tabla ",
      "where columna1 = @i_columna1",
      "and   columna2 = @i_columna2",
      "and   columna3 = @i_columna3",
      "and   columna4 = @i_columna4",
      "and   columna5 = @i_columna5",
      "and   columna6 = @i_columna6",
      "",
      "if @@error <> 0",
      "begin",
      "   select",
      "   @o_d_msg   = 'ERROR AL ELIMINAR TABLA #tabla',",
      "   @w_n_error = 000000",
      "",
      "   goto ERROP_TRAP",
      "end"
    ],
    "description": "Delete generico con 6 condiciones y control de error"
  },
  "Select Generico": {
    "prefix": "select_generico",
    "body": [
      "select",
      "columna1,",
      "columna2,",
      "columna3,",
      "columna4,",
      "columna5,",
      "columna6",
      "from #tabla",
      "where columna1 = @i_columna1",
      "and   columna2 = @i_columna2",
      "and   columna3 = @i_columna3",
      "and   columna4 = @i_columna4",
      "and   columna5 = @i_columna5",
      "order by columna1 asc, columna2 asc, columna3 asc",
      "",
      "if @@error <> 0 or @@rowcount = 0",
      "begin",
      "   select",
      "   @o_d_msg    = 'NO SE ENCONTRARON REGISTROS EN LA TABLA #tabla',",
      "   @w_n_error  = 000000",
      "",
      "   goto ERROP_TRAP",
      "end"
    ],
    "description": "Select generico con 6 columnas, condiciones y control de error"
  },
  "Select cl_parametro": {
    "prefix": "select_cl_parametro",
    "body": [
      "select",
      "@w_pa_char     = pa_char,",
      "@w_pa_tinyint  = pa_tinyint,",
      "@w_pa_smallint = pa_smallint,",
      "@w_pa_int      = pa_int,",
      "@w_pa_money    = pa_money,",
      "@w_pa_datetime = pa_datetime,",
      "@w_pa_float    = pa_float",
      "from cobis..cl_parametro",
      "where pa_producto = 'CTE' --PRODUCTO",
      "and   pa_nemonico = 'CMA' --NEMONICO"
    ],
    "description": "Select a la tabla cobis..cl_parametro"
  },
  "Select cl_catalogo / cl_tabla": {
    "prefix": "select_cl_catalogo_cl_tabla",
    "body": [
      "select a.valor",
      "from cobis..cl_catalogo a, cobis..cl_tabla b",
      "where a.codigo = @w_codigo",
      "and   a.tabla  = b.codigo",
      "and   b.tabla  = 'nombre_tabla'",
      "and   a.estado = 'V'"
    ],
    "description": "Select a la tabla cobis..cl_catalogo / cobis..cl_tabla"
  },
  "Control Error Generico 1": {
    "prefix": "control_error_generico1",
    "body": [
      "if @@error <> 0",
      "begin",
      "   select",
      "   @o_d_msg   = 'DESCRIPCION DEL ERROR',",
      "   @w_n_error = 000000 --CODIGO DE ERROR",
      "",
      "   goto ERROP_TRAP",
      "end"
    ],
    "description": "Control de error basico para @@error"
  },
  "Control Error Generico 2": {
    "prefix": "control_error_generico2",
    "body": [
      "if @@error <> 0 or @@rowcount = 0",
      "begin",
      "   select",
      "   @o_d_msg   = 'DESCRIPCION DEL ERROR',",
      "   @w_n_error = 000000 --CODIGO DE ERROR",
      "",
      "   goto ERROP_TRAP",
      "end"
    ],
    "description": "Control de error para @@error y @@rowcount"
  },
  "Control Error Generico 3": {
    "prefix": "control_error_generico3",
    "body": [
      "if @@rowcount = 0",
      "begin",
      "   select",
      "   @o_d_msg   = 'DESCRIPCION DEL ERROR',",
      "   @w_n_error = 000000 --CODIGO DE ERROR",
      "",
      "   goto ERROP_TRAP",
      "end"
    ],
    "description": "Control de error solo para @@rowcount"
  },
  "Stored Procedure Standard": {
    "prefix": "sp_standard",
    "body": [
      "use BASEDEDATOS",
      "go",
      "",
      "if exists( select 1 from sysobjects where name = 'STOREDPROCEDURE' )",
      "begin",
      "   drop proc STOREDPROCEDURE",
      "end",
      "go",
      "",
      "/*<summary>",
      "",
      "(DESCRIPCION DEL SP)",
      "",
      "Nombre Fisico: ",
      "",
      "</summary>*/",
      "",
      "/*<historylog>",
      "<log LogType=\"Refactor\" revision=\"1.0\" date=\"01/01/2025\" email=\"@accusys.com.ar\">Created</log>",
      "</historylog>*/",
      "",
      "create proc STOREDPROCEDURE(",
      "--<parameters>",
      "@s_ssn                          int,                                 --<param required =\"yes\" description=\"NUMERO SECUENCIAL UNICO DADO POR EL MONITOR TRANSACCIONAL PARA LA TRANSACCION.\"/>",
      "@s_srv                          varchar(30),                         --<param required =\"yes\" description=\"NOMBRE DEL SERVIDOR DONDE SE ORIGINA LA TRANSACCION.\"/>",
      "@s_lsrv                         varchar(30),                         --<param required =\"yes\" description=\"NOMBRE DEL SERVIDOR DONDE SE ENCUENTRA LA TRANSACCION.\"/>",
      "@s_user                         varchar(30),                         --<param required =\"yes\" description=\"NOMBRE DEL USUARIO REGISTRADO QUE EJECUTA LA TRANSACCION (LOGIN).\"/>",
      "@s_sesn                         int,                                 --<param required =\"yes\" description=\"NUMERO DE LA SESION O DE REGISTRO DEL USUARIO QUE EJECUTA LA TRANSACCION.\"/>",
      "@s_term                         varchar(10),                         --<param required =\"yes\" description=\"NOMBRE O IDENTIFICACION DE LA TERMINAL DONDE SE EJECUTO LA TRANSACCION.\"/>",
      "@s_date                         datetime,                            --<param required =\"yes\" description=\"FECHA DE PROCESO DEL SERVIDOR EN QUE SE EJECUTA LA TRANSACCION.\"/>",
      "@s_ofi                          smallint,                            --<param required =\"yes\" description=\"NUMERO DE LA OFICINA DONDE SE ENCUENTRA REGISTRADO EL USUARIO QUE EJECUTA LA TRANSACCION.\"/>",
      "@s_rol                          smallint       = 1,                  --<param required =\"no\"  description=\"NUMERO DEL ROL CON EL CUAL SE ENCUENTRA REGISTRADO EL USUARIO.\"/>",
      "@s_org_err                      char(1)        = null,               --<param required =\"no\"  description=\"ORIGEN DEL ERROR SI EXISTIERA: [A]PLICACION  [S]ISTEMA\"/>",
      "@s_error                        int            = null,               --<param required =\"no\"  description=\"NUMERO DE ERROR GENERADO.\"/>",
      "@s_sev                          tinyint        = null,               --<param required =\"no\"  description=\"SEVERIDAD DEL ERROR: [0] - NO ROLLBACK  [1] - SI ROLLBACK\"/>",
      "@s_msg                          mensaje        = null,               --<param required =\"no\"  description=\"TEXTO DESCRIPTIVO DEL ERROR PRODUCIDO.\"/>",
      "@s_org                          char(1),                             --<param required =\"yes\" description=\"ORIGEN DE LA TRANSACCION:  [L] - LOCAL  [R] - RESUBMIT  [S] - SUBMIT\"/>",
      "@t_debug                        char(1)        = 'N',                --<param required =\"no\"  description=\"INDICA SI LA TRANSACCION DEBE SER EJECUTADA EN MODO DE DEPURACION: [S]I  [N]O\"/>",
      "@t_file                         varchar(14)    = null,               --<param required =\"no\"  description=\"NOMBRE DEL ARCHIVO QUE CONTENDRA LOS RESULTADOS ENVIADOS EN MODO DE DEBUG.\"/>",
      "@t_from                         varchar(32)    = null,               --<param required =\"no\"  description=\"STORED PROCEDURE DESDE EL QUE FUE LLAMADO EL PROGRAMA ACTUAL.\"/>",
      "@t_rty                          char(1)        = 'N',                --<param required =\"no\"  description=\"INDICA SI LA TRANSACCION HA SIDO EJECUTADA EN MODO DE RE-ENTRY: [S]I  [N]O\"/>",
      "@t_trn                          smallint,                            --<param required =\"yes\" description=\"CODIGO UNICO DE TRANSACCION COBIS.\"/>",
      "@t_corr                         char(1)        = 'N',                --<param required =\"no\"  description=\"INDICA SI LA TRANSACCION HA SIDO EJECUTADA EN MODO DE CORRECCION:  [S]I  [N]O\"/>",
      "@t_ssn_corr                     int            = null,               --<param required =\"no\"  description=\"SSN DE LA TRANSACCION A SER REVERSADA.\"/>",
      "@i_operacion                    char(2),                             --<param required =\"yes\" description=\"VARIABLE DE ENTRADA DEL STORED PROCEDURE.\"/>",
      "@i_m_quien_llama                char(1)        = 'F',                --<param required =\"no\"  description=\"INDICA SI VIENE DE FRONTEND: [F]RONTEND  [B]BACKEND\"/>",
      "--PARAMETROS DE SALIDA",
      "@o_n_error                      int            = null out,           --<param required =\"no\"  description=\"NUMERO DE ERROR GENERADO.\"/>",
      "@o_d_msg                        varchar(132)   = null out            --<param required =\"no\"  description=\"Mensaje de error de retorno.\"/>",
      ")",
      "--</parameters>",
      "as",
      "declare",
      "@w_return                       int,",
      "@w_n_error                      int,",
      "@w_sp_name                      varchar(30),",
      "@w_d_prefijo                    varchar(10)",
      "",
      "/* CAPTURA NOMBRE DEL STORED PROCEDURE E INICIALIZACION DE VARIABLES*/",
      "select ",
      "@w_sp_name  = 'STOREDPROCEDURE',",
      "@w_n_error  = 0,",
      "@w_return   = 0",
      "",
      "return @w_n_error",
      "",
      "/*<returns>",
      "<return value = \"0\"       description= \"EJECUCION EXITOSA\" />",
      "<recordset>",
      "",
      "<column name=\"\" datatype=\"\" datalength=\"\" description=\"\" />",
      "</recordset>",
      "",
      "</returns>*/",
      "",
      "--<keyword>STOREDPROCEDURE</keyword>",
      "",
      "/*<dependency ObjName=\"\" xtype=\"\" dependentObjectName=\"\" dependentObjectType=\"\" />*/",
      "go"
    ],
    "description": "Estructura estandar para stored procedure COBIS"
  },
  "ERROR_TRAP": {
    "prefix": "ERROR_TRAP",
    "body": [
      "ERROR_TRAP:",
      "",
      "select @o_d_msg = ltrim(rtrim(@o_d_msg))",
      "",
      "if @o_n_error <> 0",
      "begin -- HUBO UN ERROR",
      "",
      "   if @@trancount > 0",
      "   begin -- SI TIENE UN BEGIN TRAN, LO CIERRO POR ESTE MEDIO",
      "      rollback",
      "   end   -- SI TIENE UN BEGIN TRAN, LO CIERRO POR ESTE MEDIO",
      "",
      "   if @o_d_msg is null",
      "   begin -- SI EL MENSAJE DE ERROR ES NULO LO BUSCO EN LA TABLA DE ERRORES POR SU CODIGO",
      "      select",
      "         @o_d_msg = ltrim(rtrim(upper(mensaje)))",
      "      from cobis..cl_errores",
      "      where numero = @o_n_error",
      "   end   -- SI EL MENSAJE DE ERROR ES NULO LO BUSCO EN LA TABLA DE ERRORES POR SU CODIGO",
      "",
      "   select @o_d_msg = isnull(@o_d_msg, 'SIN MENSAJE ASOCIADO')",
      "",
      "   if @w_d_prefijo is not null",
      "   begin",
      "      select @o_d_msg = @w_d_prefijo + '-' + @o_d_msg",
      "   end",
      "",
      "   if @i_m_quien_llama in ('F','B')",
      "   begin -- COMPLETA NOMBRE DE SP EN MENSAJE",
      "      if @o_d_msg is not null  and  charindex('[SP_', upper(@o_d_msg)) = 0",
      "      begin -- SE COMPLETA EL MENSAJE CON EL NOMBRE DEL SP",
      "         select @o_d_msg = '[' || @w_sp_name || ']  ' || @o_d_msg",
      "      end   -- SE COMPLETA EL MENSAJE CON EL NOMBRE DEL SP",
      "   end   -- COMPLETA NOMBRE DE SP EN MENSAJE",
      "",
      "   if @i_m_quien_llama = 'F'",
      "   begin -- SI VIENE DE FRONTEND ENTONCES SI MUESTRA EL MENSAJE DE ERROR",
      "",
      "      exec cobis..sp_cerror",
      "      @t_debug       = @t_debug,",
      "      @t_file        = @t_file,",
      "      @t_from        = @w_sp_name,",
      "      @i_num         = @o_n_error,",
      "      @i_msg         = @o_d_msg",
      "   end   -- SI VIENE DE FRONTEND ENTONCES SI MUESTRA EL MENSAJE DE ERROR",
      "",
      "   --BUSCA EL NOMBRE DEL SP EN EL MENSAJE, SI NO LO ENCUENTRA GUARDA EL DE ESTE SP",
      "   select @w_sp_name = isnull( substring(@o_d_msg,  nullif(charindex('[sp_', @o_d_msg),0)+1 , abs( nullif(charindex(']', @o_d_msg),0) - charindex('[sp_', @o_d_msg) - 1 )), ",
      "                        @w_sp_name)",
      "end -- HUBO UN ERROR"
    ],
    "description": "Estructura estandar para error trap"
  },
  "Exec Stored Procedure": {
    "prefix": "exec_stored_procedure",
    "body": [
      "exec @o_n_error = #STORED_PROCEDURE",
      "@s_ssn            = @s_ssn,",
      "@s_srv            = @s_srv,",
      "@s_lsrv           = @s_lsrv,",
      "@s_user           = @s_user,",
      "@s_sesn           = @s_sesn,",
      "@s_term           = @s_term,",
      "@s_date           = @s_date,",
      "@s_ofi            = @s_ofi,",
      "@s_rol            = @s_rol,",
      "@s_org_err        = @s_org_err,",
      "@s_error          = @s_error,",
      "@s_sev            = @s_sev,",
      "@s_msg            = @s_msg,",
      "@s_org            = @s_org,",
      "@t_debug          = @t_debug,",
      "@t_file           = @t_file,",
      "@t_from           = @t_from,",
      "@t_rty            = @t_rty,",
      "@t_trn            = 0000,",
      "@t_corr           = @t_corr,",
      "@t_ssn_corr       = @t_ssn_corr,",
      "@i_operacion      = 'I',",
      "@o_d_msg          = @o_d_msg     out,",
      "@o_n_error        = @o_n_error   out",
      "",
      "if @o_n_error <> 0",
      "begin",
      "   select",
      "   @o_d_msg    = 'ERROR EN LLAMADO AL SP #STORED_PROCEDURE'",
      "",
      "   goto ERROR_TRAP",
      "end"
    ],
    "description": "Ejemplo para execute de stored procedure"
  },
  "Catalogo Standard": {
    "prefix": "catalogo_standard",
    "body": [
      "use cobis",
      "go",
      "",
      "declare",
      "@w_nombre_tabla_1 varchar(30),",
      "@w_num_tabla_1    smallint",
      "",
      "print '------ DESCRIPCION DEL CATALOGO ------'",
      "",
      "select",
      "@w_nombre_tabla_1 = 'NOMBRE_TABLA',",
      "@w_num_tabla_1    = null",
      "",
      "select @w_num_tabla_1 = codigo",
      "from   cobis..cl_tabla",
      "where  tabla        = @w_nombre_tabla_1",
      "",
      "if @@rowcount = 0 or @w_num_tabla_1 is null",
      "begin",
      "   update cobis..cl_seqnos set",
      "   siguiente    = siguiente + 1,",
      "   @w_num_tabla_1 = siguiente + 1",
      "   where tabla  = 'cl_tabla'",
      "   and   bdatos = 'cobis'",
      "",
      "   if @@error <> 0",
      "   begin",
      "      print 'ERROR AL ACTUALIZAR SEQNOS'",
      "      goto FIN",
      "   end",
      "end",
      "",
      "delete cobis..cl_tabla",
      "where  codigo = @w_num_tabla_1",
      "",
      "if @@error <> 0",
      "begin",
      "   print 'ERROR AL ELIMINAR cl_tabla'",
      "   goto FIN",
      "end",
      "",
      "delete cobis..cl_catalogo",
      "where  tabla = @w_num_tabla_1",
      "",
      "if @@error <> 0",
      "begin",
      "   print 'ERROR AL ELIMINAR cl_catalogo'",
      "   goto FIN",
      "end",
      "",
      "delete cobis..cl_catalogo_pro",
      "where  cp_tabla = @w_num_tabla_1",
      "",
      "if @@error <> 0",
      "begin",
      "   print 'ERROR AL ELIMINAR cl_catalogo_pro'",
      "   goto FIN",
      "end",
      "",
      "insert into cobis..cl_tabla (codigo, tabla, descripcion)",
      "values (@w_num_tabla_1, @w_nombre_tabla_1, 'DESCRIPCION DE LA TABLA')",
      "",
      "if @@error <> 0",
      "begin",
      "   print 'ERROR AL INSERTAR EN cl_tabla'",
      "   goto FIN",
      "end",
      "",
      "insert into cobis..cl_catalogo_pro (cp_producto, cp_tabla)",
      "values ('AHO', @w_num_tabla_1)",
      "",
      "if @@error <> 0",
      "begin",
      "   print 'ERROR AL INSERTAR EN cl_catalogo_pro'",
      "   goto FIN",
      "end",
      "",
      "insert into  cobis..cl_catalogo(",
      "             tabla,          codigo,   valor,   estado)",
      "      select @w_nombre_tabla_1,    '1',     '1',     'V'",
      "union select @w_nombre_tabla_1,    '2',     '2',     'V'",
      "union select @w_nombre_tabla_1,    '3',     '3',     'V'",
      "union select @w_nombre_tabla_1,    '4',     '4',     'V'",
      "union select @w_nombre_tabla_1,    '5',     '5',     'V'",
      "union select @w_nombre_tabla_1,    '6',     '6',     'V'",
      "union select @w_nombre_tabla_1,    '7',     '7',     'V'",
      "union select @w_nombre_tabla_1,    '8',     '8',     'V'",
      "union select @w_nombre_tabla_1,    '9',     '9',     'V'",
      "",
      "if @@error <> 0",
      "begin",
      "   print 'ERROR AL INSERTAR DATOS EN EL CATALOGO %1!', @w_nombre_tabla_1",
      "   goto FIN",
      "end",
      "",
      "FIN:",
      "go"
    ],
    "description": "Estructura estandar para creacion de catalogos COBIS"
  },
  "Create Table Standard": {
    "prefix": "create_table_standard",
    "body": [
      "use BASEDEDATOS",
      "go",
      "",
      "if exists (select 1 from sysobjects where name = 'NOMBRETABLA')",
      "begin",
      "    drop table NOMBRETABLA",
      "end",
      "go",
      "",
      "create table NOMBRETABLA (",
      "columna1   int           not null,",
      "columna2   varchar(30)   not null,",
      "columna3   varchar(30)   not null,",
      "columna4   char(1)       not null,",
      "columna5   varchar(30)   not null,",
      "columna6   int               null,",
      "columna7   char(1)       not null,",
      "columna8   datetime      not null,",
      "columna9   varchar(30)       null,",
      "columna10  int               null",
      ")",
      "lock datarows",
      "go",
      "",
      "create nonclustered index idx_1 on NOMBRETABLA (columna1)",
      "go",
      "",
      "create nonclustered index idx_2 on NOMBRETABLA (columna2, columna1)",
      "go",
      "",
      "-- COMPILACION DE TABLA",
      "sp_recompile NOMBRETABLA",
      "go"
    ],
    "description": "Estructura estandar para creacion de tablas"
  },
  "Create View Standard": {
    "prefix": "create_view_standard",
    "body": [
      "if exists (select 1 from sysobjects where name = 'NOMBREVISTA')",
      "begin",
      "   drop view NOMBREVISTA",
      "end",
      "go",
      "create view NOMBREVISTA (",
      "columna1,      columna2,       columna3,",
      "columna4,      columna5,       columna6,",
      "columna7,      columna8,       columna9,",
      "columna10,     columna11,      columna12 )",
      "as",
      "select",
      "columna1,      columna2,       columna3,",
      "columna4,      columna5,       columna6,",
      "columna7,      columna8,       columna9,",
      "columna10,     columna11,      columna12",
      "from ",
      "#tabla1, #tabla2, #tabla3, #tabla4",
      "where columna1 = @i_columna1",
      "and   columna2 = @i_columna2",
      "and   columna3 = @i_columna3",
      "go"
    ],
    "description": "Estructura estandar para creacion de vistas"
  },
  "Cursor Standard": {
    "prefix": "cursor_standard",
    "body": [
      "declare cursor_ejemplo cursor for",
      "select ",
      "columna1, ",
      "columna2, ",
      "columna3",
      "from #tabla1, #tabla2, #tabla3",
      "where columna1 = @i_columna1",
      "and   columna2 = @i_columna2",
      "and   columna3 = @i_columna3",
      "order by columna1",
      "for read only",
      "",
      "/* Abrir el cursor */",
      "open cursor_ejemplo",
      "",
      "/* Ubicar el primer registro para el cursor */",
      "fetch cursor_ejemplo into",
      "@w_columna1,",
      "@w_columna2,",
      "@w_columna3",
      "",
      "/* Barrer todos los registros */",
      "while @@sqlstatus <> 2",
      "begin",
      "   /* Control de error de lectura del cursor */",
      "   if @@sqlstatus = 1",
      "   begin",
      "       /* Cerrar y liberar cursor */",
      "       close cursor_ejemplo",
      "       deallocate cursor cursor_ejemplo",
      "   end",
      "",
      "   begin tran",
      "   /* Codigo del cursor */",
      "   commit tran",
      "",
      "   /* Ubicar el siguiente registro para el cursor */",
      "   fetch cursor_ejemplo into",
      "   @w_columna1,",
      "   @w_columna2,",
      "   @w_columna3",
      "end",
      "",
      "/* Cerrar y liberar cursor */",
      "close cursor_ejemplo",
      "deallocate cursor cursor_ejemplo"
    ],
    "description": "Estructura estandar para cursor"
  }
} 